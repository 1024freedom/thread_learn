

## 项目概述

这是一个轻量级的C++线程池实现，用于学习和理解多线程编程的核心概念。项目通过单例模式实现了一个可复用的线程池，支持任意类型任务的并发执行。

## 核心特性

### 1. 单例模式设计

线程池采用了**单例模式**，确保整个程序中只有一个线程池实例。通过静态局部变量实现了线程安全的懒汉式单例。

### 2. 禁止拷贝与赋值

为了防止误用，线程池显式禁用了拷贝构造函数和赋值运算符，这是管理资源类的最佳实践。 

### 3. 固定线程池大小

默认创建10个工作线程，所有线程在构造时就已创建并开始等待任务。

### 4. 高效的任务队列

使用`std::queue`存储待执行任务，配合互斥锁和条件变量实现线程安全的生产者-消费者模式。

## 技术亮点

### 移动语义优化

在构造线程时使用了`emplace_back`而非`push_back`，直接在容器内存中构造对象，避免了额外的拷贝/移动操作。

任务出队时也使用了移动语义，提高了性能：

### 条件变量的正确使用

工作线程通过条件变量等待任务，避免了忙等待：
- 当任务队列为空且未停止时，线程进入等待状态
- 当有新任务入队或线程池停止时，线程被唤醒

### 优雅的退出机制

析构函数确保所有任务执行完毕后才退出：
1. 设置停止标志
2. 唤醒所有等待的线程
3. 等待所有线程执行完毕 

工作线程在检测到停止标志且任务队列为空时才会退出： 

### 万能引用与完美转发

`enqueue`方法使用了模板和可变参数，支持任意类型的可调用对象和参数。通过`std::forward`实现完美转发，保持参数的值类别（左值/右值）。

## 使用示例

主函数展示了基本用法：向线程池提交10个任务，每个任务打印信息、休眠1秒后完成。 

## 技术栈

- **C++11标准特性**
  - `std::thread` - 线程管理
  - `std::mutex` - 互斥锁
  - `std::condition_variable` - 条件变量
  - `std::function` - 函数包装器
  - Lambda表达式
  - 移动语义
  - 可变参数模板

## Notes

这是一个教学性质的线程池实现，适合学习多线程编程的基本概念。实际生产环境可能需要考虑以下改进：
- 支持动态调整线程数量
- 添加任务优先级
- 支持返回值（使用`std::future`）
- 添加异常处理机制
- 提供线程池状态监控接口

